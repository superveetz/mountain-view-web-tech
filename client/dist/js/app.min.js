"use strict";!function(e,t){e.module("app",["smoothScroll","firebase","ui.router","ui.bootstrap","ui.validate","ngAnimate","app.controllers","app.directives","app.services","canvas-raining","ngResource","lbServices","angulartics","angulartics.google.analytics"]).run(["$rootScope","$state","$window","$firebaseAuth","$location","$anchorScroll","$timeout","MvWtSeoService",function(e,o,r,n,i,s,a,c){var l={apiKey:"AIzaSyDLoNjTWobxBBCIkHVHno2wgL78wAdXdLY",authDomain:"cis245-final-project.firebaseapp.com",databaseURL:"https://cis245-final-project.firebaseio.com"};t.initializeApp(l),e.$state=o,e.CurrentUser=void 0,e.MvWtSeoService=c.public,n().$onAuthStateChanged(function(t){e.CurrentUser=t||void 0}),e.$on("$stateChangeStart",function(t,o,r,n,i){if(e.stateChangeOccuring)return t.preventDefault();e.stateChangeOccuring=!0}),e.$on("$stateChangeSuccess",function(t,o,r,n,l){c.setTitle(o.title),c.setDescription(o.description),i.hash(n.name),s(),i.hash(""),a(function(){e.stateChangeOccuring=!1},500)})}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,o){o.html5Mode({enabled:!0,requireBase:!0}),t.otherwise("404"),e.state("app",{abstract:!0,url:"",templateUrl:"/views/index.html",controller:["$rootScope","$timeout",function(e,t){}]}).state("app.home",{url:"/",templateUrl:"/views/home/index.html",controller:["$timeout",function(e){e(function(){window.prerenderReady=!0},500)}],title:"Mountain View Web Tech",description:"A state of the art, web technology company based out of Chilliwack, British Columbia. We specialize in web development and custom business solutions including software design & development, database administration, media marketing, domain hosting/management and much more."}).state("app.about",{url:"/about",templateUrl:"/views/about/index.html",controller:["$timeout",function(e){e(function(){window.prerenderReady=!0},500)}],title:"About | Mountain View Web Tech",description:"We are a small startup based out of the Fraser Valley that is passionate about building digital stories and business solutions since 2017."}).state("app.services",{url:"/services",templateUrl:"/views/services/index.html",controller:["$timeout",function(e){e(function(){window.prerenderReady=!0},500)}],title:"Services | Mountain View Web Tech",description:"We provide many software related IT services including web development, database administation, media marketing, domain hosting/management and much more. Let's work together to create something amazing."}).state("app.contact",{url:"/contact",templateUrl:"/views/contact/index.html",controller:"ContactCtrl",title:"Contact Us | Mountain View Web Tech",description:"Interested in a quote or want to arrange a meeting? Send us a message."}).state("404",{url:"/404",templateUrl:"/views/404/index.html",controller:["$timeout",function(e){}]})}])}(angular,firebase),function(e){e.module("app.controllers",["app.services"]).controller("MainNavCtrl",["$rootScope","$timeout","$scope","$firebaseAuth","$http","$window","$state","ModalService","AlertService",function(e,t,o,r,n,i,s,a,c){o.authObj=r(),t(function(){window.prerenderReady=!0},500),o.openRegisterAccountModal=function(e){c.reset(),e?(o.closeMobileSideNav(),t(function(){a.openRegisterAccountModal()},300)):a.openRegisterAccountModal()},o.openLoginModal=function(e){c.reset(),e?(o.closeMobileSideNav(),t(function(){a.openLoginModal()},300)):a.openLoginModal()},o.showGettingStarted=!1,o.toggleGettingStarted=function(){return o.showGettingStarted=!o.showGettingStarted,!0},o.showAccountOptions=!1,o.toggleAccountOptions=function(){return o.showAccountOptions=!o.showAccountOptions,!0},o.logOut=function(){return o.authObj.$signOut(),!0},o.closeMobileSideNav=function(){return $("#mobile-side-nav").offcanvas("hide"),!0},o.openMobileSideNav=function(){return $("#mobile-side-nav").offcanvas("show"),!0}}]).controller("LoginCtrl",["$rootScope","$firebaseAuth","$scope","$http","$window","$uibModalInstance","AlertService",function(t,o,r,n,i,s,a,c){var l={email:"",pass:"",cPass:""},u={loginErr:!1,signUpErr:!1};r.serverResponse=e.copy(u),r.authObj=o(),r.newUser=e.copy(l),r.existingUser=e.copy(l),r.submitSignUpForm=function(){r.signUpSubmit=!0,r.authObj.$createUserWithEmailAndPassword(r.newUser.email,r.newUser.pass).then(function(e){r.signUpSubmit=!1,r.closeModal()}).catch(function(e){r.signUpSubmit=!1,a.setAlert({show:!0,type:"error",title:e.message})})},r.submitLoginForm=function(){r.loginSubmit=!0,r.authObj.$signInWithEmailAndPassword(r.existingUser.email,r.existingUser.pass).then(function(e){r.loginSubmit=!1,r.closeModal()}).catch(function(e){r.loginSubmit=!1,a.setAlert({show:!0,type:"error",title:e.message})})},r.loginWithFacebook=function(){r.fbSubmit=!0,r.authObj.$signInWithPopup("facebook").then(function(e){r.fbSubmit=!1,r.closeModal()}).catch(function(e){r.fbSubmit=!1,a.setAlert({show:!0,type:"error",title:e.message})})},r.loginWithTwitter=function(){r.twitSubmit=!0,r.authObj.$signInWithPopup("twitter").then(function(e){r.twitSubmit=!1,r.closeModal()}).catch(function(e){r.twitSubmit=!1,a.setAlert({show:!0,type:"error",title:e.message})})},r.loginWithGoogle=function(){r.googSubmit=!0,r.authObj.$signInWithPopup("google").then(function(e){r.googSubmit=!1,r.closeModal()}).catch(function(e){r.googSubmit=!1,a.setAlert({show:!0,type:"error",title:e.message})})},r.closeModal=function(){s.dismiss("cancel")},r.isPassConfirmed=function(e){return e.signUpForm.newUserPass.$$rawModelValue===e.signUpForm.newUserCPass.$$rawModelValue}}]).controller("MainFooterCtrl",["$scope","$document","$location","$state","smoothScroll",function(e,t,o,r,n){}]).controller("AppCtrl",["$rootScope","$state",function(e,t){}]).controller("ContactCtrl",["$scope","$http","$timeout","AlertService","Mail",function(t,o,r,n,i){r(function(){window.prerenderReady=!0},500);var s={name:"",email:"",phone:"",subject:"",message:""},a={loginErr:!1,signUpErr:!1};t.user=e.copy(s),t.serverResponse=e.copy(a),t.sendEmail=function(){t.submitSendEmail=!0,i.send({name:t.user.name,email:t.user.email,phone:t.user.phone,subject:t.user.subject,message:t.user.message}).$promise.then(function(o){t.submitSendEmail=!1,t.user=e.copy(s),t.contactForm.$setPristine(),t.contactForm.$setUntouched(),n.setAlert({show:!0,type:"success",title:"We have received your request and will get back to you as soon as we can."})}).catch(function(e){t.submitSendEmail=!1,n.setAlert({show:!0,type:"error",title:"An unexpected error occured."})})}}])}(angular),function(e){e.module("app.directives",["app.controllers"]).directive("mainNav",[function(){return{restrict:"E",replace:!0,templateUrl:"/js/directives/templates/main-nav/main-nav.html",controller:"MainNavCtrl"}}]).directive("mainFooter",[function(){return{restrict:"E",replace:!0,templateUrl:"/js/directives/templates/main-footer/main-footer.html",controller:"MainFooterCtrl"}}]).directive("alertBox",["AlertService",function(e){return{restrict:"E",templateUrl:function(e,t){return t.theme?"/js/directives/templates/alert-box/"+t.theme+".html":"/js/directives/templates/alert-box/default.html"},link:function(t){t.AlertService=e}}}]).directive("hideNavOnScroll",[function(){return{restrict:"A",link:function(t,o){var r=document.getElementById("top-nav"),n=e.element(r),i=o.scrollTop(),s=!1;o.bind("scroll",function(e){var t=o.scrollTop();t>i?s||n.hasClass("slideOutUp")||(n.hasClass("slideInDown")&&n.removeClass("slideInDown"),n.addClass("slideOutUp"),s=!0,setTimeout(function(){s=!1},500)):s||n.hasClass("slideInDown")||(n.hasClass("slideOutUp")&&n.removeClass("slideOutUp"),n.addClass("slideInDown"),s=!0,setTimeout(function(){s=!1},500)),t<=50&&(n.hasClass("slideInDown")||(n.hasClass("slideOutUp")&&n.removeClass("slideOutUp"),n.addClass("slideInDown"),s=!0,setTimeout(function(){s=!1},500))),i=o.scrollTop()})}}}]).directive("scrollDisabled",["$window","$timeout",function(t,o){return{restrict:"A",link:function(r,n){var i=e.element(t);n.on("show.bs.offcanvas",function(){var t=document.getElementsByTagName("body")[0],r=document.getElementsByTagName("html")[0],n=document.getElementById("app"),i=e.element(t),s=e.element(r);e.element(n);i.addClass("body-scroll-disabled"),s.addClass("html-scroll-disabled"),o(function(){i.ontouchmove=function(e){e.preventDefault()},n.ontouchmove=function(e){e.preventDefault()}},300)}),n.on("hide.bs.offcanvas",function(){var t=document.getElementsByTagName("body")[0],r=document.getElementsByTagName("html")[0],n=e.element(t),s=e.element(r);o(function(){i.scrollTop(400),n.removeClass("body-scroll-disabled"),s.removeClass("html-scroll-disabled"),n.ontouchmove=function(e){return!0},app.ontouchmove=function(e){return!0}},300)})}}}]).directive("fadeInOnLoad",["$timeout",function(e){return{restrict:"A",link:function(e,t,o){t.addClass("animated fadeIn")}}}])}(angular),function(e){e.module("app.services",["app.controllers"]).service("MvWtSeoService",[function(){var e={title:"",description:""};return{public:{getTitle:function(){return e.title},getDescription:function(){return e.description}},setTitle:function(t){e.title=t},setDescription:function(t){e.description=t}}}]).service("ModalService",["$uibModal","$timeout",function(e,t){return{openRegisterAccountModal:function(){e.open({animation:!0,ariaLabelledBy:"register-account-title",ariaDescribedBy:"register-account-body",templateUrl:"register-account-modal.html",controller:"RegisterAccountCtrl",backdrop:!0,size:"md"}).result.then(function(e){}).catch(function(e){})},openLoginModal:function(){e.open({animation:!0,ariaLabelledBy:"login-title",ariaDescribedBy:"login-body",templateUrl:"login-modal.html",controller:"LoginCtrl",backdrop:!0,size:"md"}).result.then(function(e){}).catch(function(e){})}}}]).service("AlertService",["$timeout",function(t){var o={show:!1,type:"success"};return{showAlert:function(){return o.show=!0,!0},hideAlert:function(){return o.show=!1,!0},hasAlert:function(){return o.show},reset:function(){return o={},!0},setAlert:function(t){return o=e.copy(t),"error"==o.type&&o.slimErr&&(o.errList=[],o.title=o.slimErr&&o.slimErr.data&&o.slimErr.data.exception&&o.slimErr.data.exception[0]&&o.slimErr.data.exception[0].message?o.slimErr.data.exception[0].message:"Error"),!0},getAlert:function(){return o}}}])}(angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="lbServices"),function(e,t,o){function r(e){var t=e.match(/^(?:https?:)?\/\/([^\/]+)/);return t?t[1]:null}var n="/api",i="authorization",s=r(n)||location.host,a=t.module("lbServices",["ngResource"]);a.factory("Person",["LoopBackResource","LoopBackAuth","$injector","$q",function(e,t,o,r){var i=e(n+"/People/:id",{id:"@id"},{prototype$__findById__accessTokens:{params:{fk:"@fk"},url:n+"/People/:id/accessTokens/:fk",method:"GET"},prototype$__destroyById__accessTokens:{params:{fk:"@fk"},url:n+"/People/:id/accessTokens/:fk",method:"DELETE"},prototype$__updateById__accessTokens:{params:{fk:"@fk"},url:n+"/People/:id/accessTokens/:fk",method:"PUT"},prototype$__get__accessTokens:{isArray:!0,url:n+"/People/:id/accessTokens",method:"GET"},prototype$__create__accessTokens:{url:n+"/People/:id/accessTokens",method:"POST"},prototype$__delete__accessTokens:{url:n+"/People/:id/accessTokens",method:"DELETE"},prototype$__count__accessTokens:{url:n+"/People/:id/accessTokens/count",method:"GET"},create:{url:n+"/People",method:"POST"},createMany:{isArray:!0,url:n+"/People",method:"POST"},upsert:{url:n+"/People",method:"PUT"},replaceOrCreate:{url:n+"/People/replaceOrCreate",method:"POST"},upsertWithWhere:{url:n+"/People/upsertWithWhere",method:"POST"},exists:{url:n+"/People/:id/exists",method:"GET"},findById:{url:n+"/People/:id",method:"GET"},replaceById:{url:n+"/People/:id/replace",method:"POST"},find:{isArray:!0,url:n+"/People",method:"GET"},findOne:{url:n+"/People/findOne",method:"GET"},updateAll:{url:n+"/People/update",method:"POST"},deleteById:{url:n+"/People/:id",method:"DELETE"},count:{url:n+"/People/count",method:"GET"},prototype$updateAttributes:{url:n+"/People/:id",method:"PUT"},createChangeStream:{url:n+"/People/change-stream",method:"POST"},login:{params:{include:"user"},interceptor:{response:function(e){var o=e.data;return t.setUser(o.id,o.userId,o.user),t.rememberMe=!1!==e.config.params.rememberMe,t.save(),e.resource}},url:n+"/People/login",method:"POST"},logout:{interceptor:{response:function(e){return t.clearUser(),t.clearStorage(),e.resource},responseError:function(e){return t.clearUser(),t.clearStorage(),e.resource}},url:n+"/People/logout",method:"POST"},confirm:{url:n+"/People/confirm",method:"GET"},resetPassword:{url:n+"/People/reset",method:"POST"},getCurrent:{url:n+"/People/:id",method:"GET",params:{id:function(){var e=t.currentUserId;return null==e&&(e="__anonymous__"),e}},interceptor:{response:function(e){return t.currentUserData=e.data,e.resource},responseError:function(e){return t.clearUser(),t.clearStorage(),r.reject(e)}},__isGetCurrentUser__:!0}});return i.patchOrCreate=i.upsert,i.updateOrCreate=i.upsert,i.patchOrCreateWithWhere=i.upsertWithWhere,i.update=i.updateAll,i.destroyById=i.deleteById,i.removeById=i.deleteById,i.patchAttributes=i.prototype$updateAttributes,i.getCachedCurrent=function(){var e=t.currentUserData;return e?new i(e):null},i.isAuthenticated=function(){return null!=this.getCurrentId()},i.getCurrentId=function(){return t.currentUserId},i.modelName="Person",i}]),a.factory("Mail",["LoopBackResource","LoopBackAuth","$injector","$q",function(e,t,o,r){var i=e(n+"/Mails/:id",{id:"@id"},{create:{url:n+"/Mails",method:"POST"},createMany:{isArray:!0,url:n+"/Mails",method:"POST"},upsert:{url:n+"/Mails",method:"PUT"},replaceOrCreate:{url:n+"/Mails/replaceOrCreate",method:"POST"},upsertWithWhere:{url:n+"/Mails/upsertWithWhere",method:"POST"},exists:{url:n+"/Mails/:id/exists",method:"GET"},findById:{url:n+"/Mails/:id",method:"GET"},replaceById:{url:n+"/Mails/:id/replace",method:"POST"},find:{isArray:!0,url:n+"/Mails",method:"GET"},findOne:{url:n+"/Mails/findOne",method:"GET"},updateAll:{url:n+"/Mails/update",method:"POST"},deleteById:{url:n+"/Mails/:id",method:"DELETE"},count:{url:n+"/Mails/count",method:"GET"},prototype$updateAttributes:{url:n+"/Mails/:id",method:"PUT"},createChangeStream:{url:n+"/Mails/change-stream",method:"POST"},send:{url:n+"/Mails/send",method:"POST"}});return i.patchOrCreate=i.upsert,i.updateOrCreate=i.upsert,i.patchOrCreateWithWhere=i.upsertWithWhere,i.update=i.updateAll,i.destroyById=i.deleteById,i.removeById=i.deleteById,i.patchAttributes=i.prototype$updateAttributes,i.modelName="Mail",i}]),a.factory("Email",["LoopBackResource","LoopBackAuth","$injector","$q",function(e,t,o,r){var i=e(n+"/emails/:id",{id:"@id"},{});return i.modelName="Email",i}]),a.factory("LoopBackAuth",function(){function e(){var e=this;r.forEach(function(t){e[t]=o(t)}),this.currentUserData=null}function t(e,t,o){try{var r=n+t;null==o&&(o=""),e[r]=o}catch(e){console.log("Cannot access local/session storage:",e)}}function o(e){var t=n+e;return localStorage[t]||sessionStorage[t]||null}var r=["accessTokenId","currentUserId","rememberMe"],n="$LoopBack$";return e.prototype.save=function(){var e=this,o=this.rememberMe?localStorage:sessionStorage;r.forEach(function(r){t(o,r,e[r])})},e.prototype.setUser=function(e,t,o){this.accessTokenId=e,this.currentUserId=t,this.currentUserData=o},e.prototype.clearUser=function(){this.accessTokenId=null,this.currentUserId=null,this.currentUserData=null},e.prototype.clearStorage=function(){r.forEach(function(e){t(sessionStorage,e,null),t(localStorage,e,null)})},new e}).config(["$httpProvider",function(e){e.interceptors.push("LoopBackAuthRequestInterceptor")}]).factory("LoopBackAuthRequestInterceptor",["$q","LoopBackAuth",function(e,t){return{request:function(o){var n=r(o.url);if(n&&n!==s)return o;if(t.accessTokenId)o.headers[i]=t.accessTokenId;else if(o.__isGetCurrentUser__){var a={body:{error:{status:401}},status:401,config:o,headers:function(){}};return e.reject(a)}return o||e.when(o)}}}]).provider("LoopBackResource",function(){this.setAuthHeader=function(e){i=e},this.getAuthHeader=function(){return i},this.setUrlBase=function(e){n=e,s=r(n)||location.host},this.getUrlBase=function(){return n},this.$get=["$resource",function(e){var t=function(t,o,r){var n=e(t,o,r);return n.prototype.$save=function(e,t){var o=n.upsert.call(this,{},this,e,t);return o.$promise||o},n};return t.getUrlBase=function(){return n},t.getAuthHeader=function(){return i},t}]})}(window,window.angular),function(e){e.module("canvas-raining",[]).directive("canvasRaining",["$interval",function(e){return{restrict:"A",link:function(t,o){o.ready(function(){function t(){n.clearRect(0,0,i,s);for(var e=0;e<l.length;e++){var t=l[e];n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(t.x+t.l*t.xs,t.y+t.l*t.ys),n.stroke()}r()}function r(){for(var e=0;e<l.length;e++){var t=l[e];t.x+=t.xs+d*(20*Math.random()),t.y+=t.ys,(t.x>i||t.y>s)&&(t.x=Math.random()*i,t.y=-20)}}var n=o[0].getContext("2d"),i=o.width(),s=o.height();n.strokeStyle="rgba(174,194,224,0.5)",n.lineWidth=.5,n.lineCap="round",n.globalCompositeOperation="destination-over";for(var a=[],c=0;c<2e3;c++)a.push({x:Math.random()*i,y:Math.random()*s,l:1*Math.random(),xs:4*Math.random()-4+2,ys:10*Math.random()+5});for(var l=[],u=0;u<2e3;u++)l[u]=a[u];e(t,60);var d=0;o.bind("mousemove",function(e){d=e.clientX/o.width()-.5})})}}}])}(angular),function(e){e.module("canvas-raining",[]).directive("canvasRaining",["$interval","CanvasSystem",function(e,t){return{restrict:"A",link:function(e,t){t.ready(function(){})}}}]).factory("CanvasSystem",[function(){var e=function(e){this.ctx=e[0].getContext("2d"),this.w=e.width(),this.h=e.height(),this.x=0,this.y=0,console.log("this.ctx:",this.ctx)};return e.prototype.draw=function(){this.x+=1,this.y+=1,console.log("this:",this),this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,this.w,this.h),this.ctx.fillStyle="#ffffff",this.ctx.beginPath(),this.ctx.arc(this.x,this.y,10,0,2*Math.PI,!1),this.ctx.closePath(),this.ctx.fill(),requestAnimationFrame(this.draw)},e}])}(angular);